import{a as P,o as oe}from"./evtd-b614532e.js";import{j as Me,d as fe,p as j,e as Oe,g as ke}from"./seemly-76b7b838.js";import{k as Le,F as $e,C as He,p as L,y as We,g as Se,i as ue,r as B,o as G,E as Te,B as K,c as V,z as E,J as Ve,d as J,a as _,n as Ye,W as Ce,t as Xe,x as De,D as Ne}from"./@vue-453cc9ea.js";import{u as ae}from"./@css-render-fed58b40.js";import{h as _e,u as ie,o as Pe,i as je}from"./vooks-6030c286.js";import{z as Ue}from"./vdirs-b0483831.js";import{R as qe}from"./@juggle-41516555.js";import{C as Ke}from"./css-render-d3958e6a.js";function le(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return r()}function se(n,e=!0,t=[]){return n.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&t.push(Le(String(r)));return}if(Array.isArray(r)){se(r,e,t);return}if(r.type===$e){if(r.children===null)return;Array.isArray(r.children)&&se(r.children,e,t)}else r.type!==He&&t.push(r)}}),t}function he(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const o=se(r());if(o.length===1)return o[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}let k=null;function ze(){if(k===null&&(k=document.getElementById("v-binder-view-measurer"),k===null)){k=document.createElement("div"),k.id="v-binder-view-measurer";const{style:n}=k;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(k)}return k.getBoundingClientRect()}function Ge(n,e){const t=ze();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function te(n){const e=n.getBoundingClientRect(),t=ze();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function Je(n){return n.nodeType===9?null:n.parentNode}function Ee(n){if(n===null)return null;const e=Je(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:r,overflowY:o}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+o+r))return e}return Ee(e)}const Qe=L({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;We("VBinder",(e=Se())===null||e===void 0?void 0:e.proxy);const t=ue("VBinder",null),r=B(null),o=i=>{r.value=i,t&&n.syncTargetWithParent&&t.setTargetRef(i)};let s=[];const m=()=>{let i=r.value;for(;i=Ee(i),i!==null;)s.push(i);for(const w of s)oe("scroll",w,T,!0)},b=()=>{for(const i of s)P("scroll",i,T,!0);s=[]},f=new Set,g=i=>{f.size===0&&m(),f.has(i)||f.add(i)},$=i=>{f.has(i)&&f.delete(i),f.size===0&&b()},T=()=>{Me(d)},d=()=>{f.forEach(i=>i())},h=new Set,v=i=>{h.size===0&&oe("resize",window,u),h.has(i)||h.add(i)},c=i=>{h.has(i)&&h.delete(i),h.size===0&&P("resize",window,u)},u=()=>{h.forEach(i=>i())};return G(()=>{P("resize",window,u),b()}),{targetRef:r,setTargetRef:o,addScrollListener:g,removeScrollListener:$,addResizeListener:v,removeResizeListener:c}},render(){return le("binder",this.$slots)}}),yt=Qe,xt=L({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=ue("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?Te(he("follower",this.$slots),[[e]]):he("follower",this.$slots)}});function ce(n,e){console.error(`[vueuc/${n}]: ${e}`)}const{c:I}=Ke(),de="vueuc-style";function pe(n){return n&-n}class Ze{constructor(e,t){this.l=e,this.min=t;const r=new Array(e+1);for(let o=0;o<e+1;++o)r[o]=0;this.ft=r}add(e,t){if(t===0)return;const{l:r,ft:o}=this;for(e+=1;e<=r;)o[e]+=t,e+=pe(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===void 0&&(e=this.l),e<=0)return 0;const{ft:t,min:r,l:o}=this;if(e>o)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let s=e*r;for(;e>0;)s+=t[e],e-=pe(e);return s}getBound(e){let t=0,r=this.l;for(;r>t;){const o=Math.floor((t+r)/2),s=this.sum(o);if(s>e){r=o;continue}else if(s<e){if(t===o)return this.sum(t+1)<=e?t+1:o;t=o}else return o}return t}}function me(n){return typeof n=="string"?document.querySelector(n):n()}const Re=L({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:_e(K(n,"show")),mergedTo:V(()=>{const{to:e}=n;return e??"body"})}},render(){return this.showTeleport?this.disabled?le("lazy-teleport",this.$slots):E(Ve,{disabled:this.disabled,to:this.mergedTo},le("lazy-teleport",this.$slots)):null}}),U={top:"bottom",bottom:"top",left:"right",right:"left"},ve={start:"end",center:"center",end:"start"},ne={top:"height",bottom:"height",left:"width",right:"width"},et={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},tt={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},nt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},be={top:!0,bottom:!1,left:!0,right:!1},ge={top:"end",bottom:"start",left:"end",right:"start"};function rt(n,e,t,r,o,s){if(!o||s)return{placement:n,top:0,left:0};const[m,b]=n.split("-");let f=b??"center",g={top:0,left:0};const $=(h,v,c)=>{let u=0,i=0;const w=t[h]-e[v]-e[h];return w>0&&r&&(c?i=be[v]?w:-w:u=be[v]?w:-w),{left:u,top:i}},T=m==="left"||m==="right";if(f!=="center"){const h=nt[n],v=U[h],c=ne[h];if(t[c]>e[c]){if(e[h]+e[c]<t[c]){const u=(t[c]-e[c])/2;e[h]<u||e[v]<u?e[h]<e[v]?(f=ve[b],g=$(c,v,T)):g=$(c,h,T):f="center"}}else t[c]<e[c]&&e[v]<0&&e[h]>e[v]&&(f=ve[b])}else{const h=m==="bottom"||m==="top"?"left":"top",v=U[h],c=ne[h],u=(t[c]-e[c])/2;(e[h]<u||e[v]<u)&&(e[h]>e[v]?(f=ge[h],g=$(c,h,T)):(f=ge[v],g=$(c,v,T)))}let d=m;return e[m]<t[ne[m]]&&e[m]<e[U[m]]&&(d=U[m]),{placement:f!=="center"?`${d}-${f}`:d,left:g.left,top:g.top}}function ot(n,e){return e?tt[n]:et[n]}function it(n,e,t,r,o,s){if(s)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+o)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+o)}px`,transform:"translateX(-50%)"}}}const lt=I([I(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),I(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[I("> *",{pointerEvents:"all"})])]),Mt=L({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=ue("VBinder"),t=ie(()=>n.enabled!==void 0?n.enabled:n.show),r=B(null),o=B(null),s=()=>{const{syncTrigger:d}=n;d.includes("scroll")&&e.addScrollListener(f),d.includes("resize")&&e.addResizeListener(f)},m=()=>{e.removeScrollListener(f),e.removeResizeListener(f)};J(()=>{t.value&&(f(),s())});const b=ae();lt.mount({id:"vueuc/binder",head:!0,anchorMetaName:de,ssr:b}),G(()=>{m()}),Pe(()=>{t.value&&f()});const f=()=>{if(!t.value)return;const d=r.value;if(d===null)return;const h=e.targetRef,{x:v,y:c,overlap:u}=n,i=v!==void 0&&c!==void 0?Ge(v,c):te(h);d.style.setProperty("--v-target-width",`${Math.round(i.width)}px`),d.style.setProperty("--v-target-height",`${Math.round(i.height)}px`);const{width:w,minWidth:F,placement:H,internalShift:Y,flip:Q}=n;d.setAttribute("v-placement",H),u?d.setAttribute("v-overlap",""):d.removeAttribute("v-overlap");const{style:A}=d;w==="target"?A.width=`${i.width}px`:w!==void 0?A.width=w:A.width="",F==="target"?A.minWidth=`${i.width}px`:F!==void 0?A.minWidth=F:A.minWidth="";const Z=te(d),C=te(o.value),{left:X,top:l,placement:a}=rt(H,i,Z,Y,Q,u),p=ot(a,u),{left:y,top:x,transform:S}=it(a,C,i,l,X,u);d.setAttribute("v-placement",a),d.style.setProperty("--v-offset-left",`${Math.round(X)}px`),d.style.setProperty("--v-offset-top",`${Math.round(l)}px`),d.style.transform=`translateX(${y}) translateY(${x}) ${S}`,d.style.setProperty("--v-transform-origin",p),d.style.transformOrigin=p};_(t,d=>{d?(s(),g()):m()});const g=()=>{Ye().then(f).catch(d=>console.error(d))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(d=>{_(K(n,d),f)}),["teleportDisabled"].forEach(d=>{_(K(n,d),g)}),_(K(n,"syncTrigger"),d=>{d.includes("resize")?e.addResizeListener(f):e.removeResizeListener(f),d.includes("scroll")?e.addScrollListener(f):e.removeScrollListener(f)});const $=je(),T=ie(()=>{const{to:d}=n;if(d!==void 0)return d;$.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:o,followerRef:r,mergedTo:T,syncPosition:f}},render(){return E(Re,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=E("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[E("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?Te(t,[[Ue,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});class st{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||qe)(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const r=this.elHandlersMap.get(t.target);r!==void 0&&r(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){this.elHandlersMap.has(e)&&(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}const we=new st,ye=L({name:"ResizeObserver",props:{onResize:Function},setup(n){let e=!1;const t=Se().proxy;function r(o){const{onResize:s}=n;s!==void 0&&s(o)}J(()=>{const o=t.$el;if(o===void 0){ce("resize-observer","$el does not exist.");return}if(o.nextElementSibling!==o.nextSibling&&o.nodeType===3&&o.nodeValue!==""){ce("resize-observer","$el can not be observed (it may be a text node).");return}o.nextElementSibling!==null&&(we.registerHandler(o.nextElementSibling,r),e=!0)}),G(()=>{e&&we.unregisterHandler(t.$el.nextElementSibling)})},render(){return Ce(this.$slots,"default")}});let q;function ut(){return q===void 0&&("matchMedia"in window?q=window.matchMedia("(pointer:coarse)").matches:q=!1),q}let re;function xe(){return re===void 0&&(re="chrome"in window?window.devicePixelRatio:1),re}const at=I(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[I("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[I("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),$t=L({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=ae();at.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:de,ssr:e}),J(()=>{const{defaultScrollIndex:l,defaultScrollKey:a}=n;l!=null?v({index:l}):a!=null&&v({key:a})});let t=!1,r=!1;Xe(()=>{if(t=!1,!r){r=!0;return}v({top:T.value,left:$})}),De(()=>{t=!0,r||(r=!0)});const o=V(()=>{const l=new Map,{keyField:a}=n;return n.items.forEach((p,y)=>{l.set(p[a],y)}),l}),s=B(null),m=B(void 0),b=new Map,f=V(()=>{const{items:l,itemSize:a,keyField:p}=n,y=new Ze(l.length,a);return l.forEach((x,S)=>{const M=x[p],z=b.get(M);z!==void 0&&y.add(S,z)}),y}),g=B(0);let $=0;const T=B(0),d=ie(()=>Math.max(f.value.getBound(T.value-fe(n.paddingTop))-1,0)),h=V(()=>{const{value:l}=m;if(l===void 0)return[];const{items:a,itemSize:p}=n,y=d.value,x=Math.min(y+Math.ceil(l/p+1),a.length-1),S=[];for(let M=y;M<=x;++M)S.push(a[M]);return S}),v=(l,a)=>{if(typeof l=="number"){w(l,a,"auto");return}const{left:p,top:y,index:x,key:S,position:M,behavior:z,debounce:O=!0}=l;if(p!==void 0||y!==void 0)w(p,y,z);else if(x!==void 0)i(x,z,O);else if(S!==void 0){const R=o.value.get(S);R!==void 0&&i(R,z,O)}else M==="bottom"?w(0,Number.MAX_SAFE_INTEGER,z):M==="top"&&w(0,0,z)};let c,u=null;function i(l,a,p){const{value:y}=f,x=y.sum(l)+fe(n.paddingTop);if(!p)s.value.scrollTo({left:0,top:x,behavior:a});else{c=l,u!==null&&window.clearTimeout(u),u=window.setTimeout(()=>{c=void 0,u=null},16);const{scrollTop:S,offsetHeight:M}=s.value;if(x>S){const z=y.get(l);x+z<=S+M||s.value.scrollTo({left:0,top:x+z-M,behavior:a})}else s.value.scrollTo({left:0,top:x,behavior:a})}}function w(l,a,p){s.value.scrollTo({left:l,top:a,behavior:p})}function F(l,a){var p,y,x;if(t||n.ignoreItemResize||X(a.target))return;const{value:S}=f,M=o.value.get(l),z=S.get(M),O=(x=(y=(p=a.borderBoxSize)===null||p===void 0?void 0:p[0])===null||y===void 0?void 0:y.blockSize)!==null&&x!==void 0?x:a.contentRect.height;if(O===z)return;O-n.itemSize===0?b.delete(l):b.set(l,O-n.itemSize);const D=O-z;if(D===0)return;S.add(M,D);const W=s.value;if(W!=null){if(c===void 0){const ee=S.sum(M);W.scrollTop>ee&&W.scrollBy(0,D)}else if(M<c)W.scrollBy(0,D);else if(M===c){const ee=S.sum(M);O+ee>W.scrollTop+W.offsetHeight&&W.scrollBy(0,D)}C()}g.value++}const H=!ut();let Y=!1;function Q(l){var a;(a=n.onScroll)===null||a===void 0||a.call(n,l),(!H||!Y)&&C()}function A(l){var a;if((a=n.onWheel)===null||a===void 0||a.call(n,l),H){const p=s.value;if(p!=null){if(l.deltaX===0&&(p.scrollTop===0&&l.deltaY<=0||p.scrollTop+p.offsetHeight>=p.scrollHeight&&l.deltaY>=0))return;l.preventDefault(),p.scrollTop+=l.deltaY/xe(),p.scrollLeft+=l.deltaX/xe(),C(),Y=!0,Me(()=>{Y=!1})}}}function Z(l){if(t||X(l.target)||l.contentRect.height===m.value)return;m.value=l.contentRect.height;const{onResize:a}=n;a!==void 0&&a(l)}function C(){const{value:l}=s;l!=null&&(T.value=l.scrollTop,$=l.scrollLeft)}function X(l){let a=l;for(;a!==null;){if(a.style.display==="none")return!0;a=a.parentElement}return!1}return{listHeight:m,listStyle:{overflow:"auto"},keyToIndex:o,itemsStyle:V(()=>{const{itemResizable:l}=n,a=j(f.value.sum());return g.value,[n.itemsStyle,{boxSizing:"content-box",height:l?"":a,minHeight:l?a:"",paddingTop:j(n.paddingTop),paddingBottom:j(n.paddingBottom)}]}),visibleItemsStyle:V(()=>(g.value,{transform:`translateY(${j(f.value.sum(d.value))})`})),viewportItems:h,listElRef:s,itemsElRef:B(null),scrollTo:v,handleListResize:Z,handleListScroll:Q,handleListWheel:A,handleItemResize:F}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:r}=this;return E(ye,{onResize:this.handleListResize},{default:()=>{var o,s;return E("div",Ne(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?E("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[E(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(m=>{const b=m[e],f=t.get(b),g=this.$slots.default({item:m,index:f})[0];return n?E(ye,{key:b,onResize:$=>this.handleItemResize(b,$)},{default:()=>g}):(g.key=b,g)})})]):(s=(o=this.$slots).empty)===null||s===void 0?void 0:s.call(o)])}})}}),dt=I(".v-x-scroll",{overflow:"auto",scrollbarWidth:"none"},[I("&::-webkit-scrollbar",{width:0,height:0})]),St=L({name:"XScroll",props:{disabled:Boolean,onScroll:Function},setup(){const n=B(null);function e(o){!(o.currentTarget.offsetWidth<o.currentTarget.scrollWidth)||o.deltaY===0||(o.currentTarget.scrollLeft+=o.deltaY+o.deltaX,o.preventDefault())}const t=ae();return dt.mount({id:"vueuc/x-scroll",head:!0,anchorMetaName:de,ssr:t}),Object.assign({selfRef:n,handleWheel:e},{scrollTo(...o){var s;(s=n.value)===null||s===void 0||s.scrollTo(...o)}})},render(){return E("div",{ref:"selfRef",onScroll:this.onScroll,onWheel:this.disabled?void 0:this.handleWheel,class:"v-x-scroll"},this.$slots)}});function Be(n){return n instanceof HTMLElement}function Fe(n){for(let e=0;e<n.childNodes.length;e++){const t=n.childNodes[e];if(Be(t)&&(Ae(t)||Fe(t)))return!0}return!1}function Ie(n){for(let e=n.childNodes.length-1;e>=0;e--){const t=n.childNodes[e];if(Be(t)&&(Ae(t)||Ie(t)))return!0}return!1}function Ae(n){if(!ft(n))return!1;try{n.focus({preventScroll:!0})}catch{}return document.activeElement===n}function ft(n){if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.getAttribute("disabled"))return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return n.type!=="hidden"&&n.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let N=[];const Tt=L({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(n){const e=Oe(),t=B(null),r=B(null);let o=!1,s=!1;const m=typeof document>"u"?null:document.activeElement;function b(){return N[N.length-1]===e}function f(u){var i;u.code==="Escape"&&b()&&((i=n.onEsc)===null||i===void 0||i.call(n,u))}J(()=>{_(()=>n.active,u=>{u?(T(),oe("keydown",document,f)):(P("keydown",document,f),o&&d())},{immediate:!0})}),G(()=>{P("keydown",document,f),o&&d()});function g(u){if(!s&&b()){const i=$();if(i===null||i.contains(ke(u)))return;h("first")}}function $(){const u=t.value;if(u===null)return null;let i=u;for(;i=i.nextSibling,!(i===null||i instanceof Element&&i.tagName==="DIV"););return i}function T(){var u;if(!n.disabled){if(N.push(e),n.autoFocus){const{initialFocusTo:i}=n;i===void 0?h("first"):(u=me(i))===null||u===void 0||u.focus({preventScroll:!0})}o=!0,document.addEventListener("focus",g,!0)}}function d(){var u;if(n.disabled||(document.removeEventListener("focus",g,!0),N=N.filter(w=>w!==e),b()))return;const{finalFocusTo:i}=n;i!==void 0?(u=me(i))===null||u===void 0||u.focus({preventScroll:!0}):n.returnFocusOnDeactivated&&m instanceof HTMLElement&&(s=!0,m.focus({preventScroll:!0}),s=!1)}function h(u){if(b()&&n.active){const i=t.value,w=r.value;if(i!==null&&w!==null){const F=$();if(F==null||F===w){s=!0,i.focus({preventScroll:!0}),s=!1;return}s=!0;const H=u==="first"?Fe(F):Ie(F);s=!1,H||(s=!0,i.focus({preventScroll:!0}),s=!1)}}}function v(u){if(s)return;const i=$();i!==null&&(u.relatedTarget!==null&&i.contains(u.relatedTarget)?h("last"):h("first"))}function c(u){s||(u.relatedTarget!==null&&u.relatedTarget===t.value?h("last"):h("first"))}return{focusableStartRef:t,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:v,handleEndFocus:c}},render(){const{default:n}=this.$slots;if(n===void 0)return null;if(this.disabled)return n();const{active:e,focusableStyle:t}=this;return E($e,null,[E("div",{"aria-hidden":"true",tabindex:e?"0":"-1",ref:"focusableStartRef",style:t,onFocus:this.handleStartFocus}),n(),E("div",{"aria-hidden":"true",style:t,ref:"focusableEndRef",tabindex:e?"0":"-1",onFocus:this.handleEndFocus})])}});export{Tt as F,Re as L,ye as V,$t as a,Mt as b,xt as c,yt as d,St as e,we as r};
